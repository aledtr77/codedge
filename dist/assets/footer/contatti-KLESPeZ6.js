import{i as h}from"../breadcrumb-loader-DZKY_0fu.js";/* empty css                */import{_ as k}from"../preload-helper-D7HrI6pR.js";let m=!1,u=!1,i=null,o=null;async function L(){if(o)return o;if(typeof window<"u"&&window.emailjs)return o=window.emailjs,o;try{const t=await k(()=>import("../index-CQgKCrt3.js"),[]);return o=t.default||t,o}catch(t){return console.warn("[contatti] emailjs non disponibile (CDN mancante e @emailjs/browser non installato).",t),o=null,null}}async function S({userId:t,serviceId:f="service_7629q4n",templateId:b="template_6gwohrk",formSelector:p="#contact-form",feedbackSelector:g="#feedback",submitBtnSelector:w="button[type='submit']",loadingMessage:d="Invio in corso...",feedbackDuration:v=4e3}={}){if(m)return;if(m=!0,!t){console.warn("[contatti] userId mancante: passa userId a initContactForm()");return}const a=await L();if(!a){console.error("[contatti] emailjs non disponibile. Aggiungi il CDN o installa @emailjs/browser.");return}try{typeof a.init=="function"&&a.init(t)}catch(n){console.warn("[contatti] impossibile inizializzare emailjs:",n)}const r=document.querySelector(p),s=document.querySelector(g);if(!r){console.warn("[contatti] Form non trovato, skip init.");return}const c=r.querySelector(w)||r.querySelector("button");function l(n){s&&(s.innerHTML=n,s.classList.add("show"),!n.includes(d)&&setTimeout(()=>s.classList.remove("show"),v))}function y(){try{r.reset()}catch{}}function _(){const n=Array.from(r.querySelectorAll("[required]"));for(const e of n)if(!e.value||!String(e.value).trim())return e.focus(),!1;return!0}return i=async function(n){if(n.preventDefault(),!_()){l("Compila i campi obbligatori.");return}c&&(c.disabled=!0),l(`${d} <span class="spinner"></span>`);const e=new FormData(r),j={contatto:e.get("nome")||e.get("name")||"",name:e.get("nome")||e.get("name")||"",email:e.get("email")||"",message:e.get("messaggio")||e.get("message")||"",form:Object.fromEntries(e.entries())};try{await a.send(f,b,j),l("Messaggio inviato con successo!"),y()}catch(q){console.error("[contatti] send error:",q),l("Errore durante l'invio. Riprova.")}finally{c&&(c.disabled=!1)}},u||(r.addEventListener("submit",i),u=!0),{destroy(){u&&i&&(r.removeEventListener("submit",i),u=!1,i=null),m=!1}}}document.addEventListener("DOMContentLoaded",()=>{h({selector:"#breadcrumb-container",enableLog:!0,rootUrl:"https://codedge.it/",currentIsLink:!0,onMount:t=>console.log("breadcrumbs montate",t)}),document.querySelector("#contact-form")&&S({userId:"_jaOmpsmW4bnrY_bq",serviceId:"service_7629q4n",templateId:"template_6gwohrk",formSelector:"#contact-form",feedbackSelector:"#feedback",loadingMessage:"Invio in corso...",feedbackDuration:4e3})});
