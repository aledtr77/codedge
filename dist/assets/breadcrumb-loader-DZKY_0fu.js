(function(){const h=document.createElement("link").relList;if(h&&h.supports&&h.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))f(t);new MutationObserver(t=>{for(const r of t)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&f(o)}).observe(document,{childList:!0,subtree:!0});function b(t){const r={};return t.integrity&&(r.integrity=t.integrity),t.referrerPolicy&&(r.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?r.credentials="include":t.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function f(t){if(t.ep)return;t.ep=!0;const r=b(t);fetch(t.href,r)}})();document.addEventListener("click",n=>{O.contains(n.target)||k.contains(n.target)||!O.classList.contains("active")||(O.classList.remove("active"),k.classList.remove("active"))});const k=document.querySelector(".menu-icon"),O=document.querySelector(".nav-menu");k.addEventListener("click",()=>{k.classList.toggle("active"),O.classList.toggle("active")});const x=document.querySelectorAll(".logo"),T=document.querySelectorAll(".invisible-text, .resize-text");function j(){window.innerWidth<860?(x.forEach(n=>n.style.display="none"),T.forEach(n=>n.style.display="none")):(x.forEach(n=>n.style.display=""),T.forEach(n=>n.style.display=""))}window.addEventListener("resize",j),j();(function(){if(window.__navLoaderActive)return;window.__navLoaderActive=!0;const n={placeholderSelector:"#nav-menu",partialPath:"/partials/nav.html",fetchOptions:{cache:"no-store"},enableLog:!1,forceReload:!1};function h(...t){n.enableLog&&console.log("[nav-loader]",...t)}async function b(){const t=document.querySelector(n.placeholderSelector);if(t)if(t.dataset.partialLoaded!=="true"||n.forceReload)try{const r=await fetch(n.partialPath,n.fetchOptions);if(!r.ok)return void console.error("[nav-loader] fetch fallito:",r.status,n.partialPath);const o=await r.text(),m=new DOMParser().parseFromString(o,"text/html"),a=m.querySelector("ul"),p=a?a.innerHTML.trim():m.body.innerHTML.trim(),A=(t.innerHTML||"").trim();if(A&&A===p&&!n.forceReload)return h("Contenuto identico già presente nel placeholder, skip iniezione."),void(t.dataset.partialLoaded="true");t.innerHTML="",t.innerHTML=a?a.innerHTML:m.body.innerHTML,t.dataset.partialLoaded="true",h("Nav iniettata con successo."),function(S){const E=f(location.pathname||"/");S.querySelectorAll("a.nav-link").forEach(L=>{const l=L.getAttribute("href")||"";if(/^(mailto:|tel:|javascript:|#)/i.test(l))return;let y;try{y=new URL(l,location.origin).pathname}catch{y=l}y=f(y),y===E?(L.setAttribute("aria-current","page"),L.classList.add("is-active")):(L.removeAttribute("aria-current"),L.classList.remove("is-active"))})}(t)}catch(r){console.error("[nav-loader] errore:",r)}else h("Placeholder già popolato; esco.");else console.warn("[nav-loader] placeholder non trovato:",n.placeholderSelector)}function f(t){return(t=(t=(t=(t||"").split("?")[0].split("#")[0]).replace(/index\.html$/i,"")).replace(/\/+$/g,""))===""?"/":t}document.addEventListener("DOMContentLoaded",b),window.navLoader={load:b,config:n}})();(function(){const n=["/partials/footer.html","/site-pages/partials/footer.html","/site-pages/footer.html"];function h(r){const o=document.querySelector("#footer-placeholder");o?(o.innerHTML=r,console.log("Footer: inserito in #footer-placeholder")):(document.body.insertAdjacentHTML("beforeend",r),console.log("Footer: inserito in document.body (append)"))}function b(r){r&&r.querySelectorAll("a").forEach(o=>{!o.getAttribute("href")&&o.dataset&&o.dataset.href&&(o.setAttribute("href",o.dataset.href),delete o.dataset.href),o.addEventListener("click",function(m){!this.getAttribute("href")&&this.dataset&&this.dataset.href&&(m.preventDefault(),window.location.href=this.dataset.href)})})}function f(r){if(!r)return;let o=!1,m="",a=null;function p(){a&&cancelAnimationFrame(a),a=requestAnimationFrame(()=>{const A=window.innerHeight||document.documentElement.clientHeight,F=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight,document.documentElement.offsetHeight,document.body.offsetHeight),S=r.offsetHeight||0,E=F<=A;E&&!o?(Object.assign(r.style,{position:"fixed",left:"0",bottom:"0",width:"100%",zIndex:"1000"}),m=document.body.style.paddingBottom||"",document.body.style.paddingBottom=S+"px",o=!0):!E&&o&&(r.style.position="",r.style.left="",r.style.bottom="",r.style.width="",r.style.zIndex="",document.body.style.paddingBottom=m||"",o=!1)})}setTimeout(p,0),setTimeout(p,400),setTimeout(p,1200),window.addEventListener("resize",p,{passive:!0}),window.addEventListener("orientationchange",p,{passive:!0}),window.addEventListener("load",p)}async function t(){for(const r of n)try{const o=await fetch(r,{cache:"no-store"});if(!o.ok){console.warn(`Footer: fetch ${r} -> status ${o.status}`);continue}const m=await o.text();h(m);const a=document.querySelector("footer");if(!a){console.error("Footer: markup inserito ma <footer> non trovato");return}b(a),f(a),console.log("Footer: caricato correttamente da",r);return}catch(o){console.warn("Footer: errore fetching",r,o&&o.message?o.message:o)}console.error("Footer: tutti i tentativi falliti. Controlla che public/partials/footer.html esista e sia servito dal dev server.")}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",t):t()})();async function C(n={}){const h="#breadcrumb-container",b=["/generated/breadcrumbs.json","/src/generated/breadcrumbs.json"],f=n.selector||h,t=typeof f=="string"?document.querySelector(f):f,r=!!n.enableLog,o=n.jsonCandidates||b,m=!!n.currentIsLink,a=(...e)=>r&&console.log("[breadcrumb-loader]",...e);if(!t)return a("container non trovato:",f),null;function p(e){return e||(e=location.pathname||"/"),e=String(e).split("?")[0].split("#")[0],e=e.replace(/\/site-pages\//g,"/"),e=e.replace(/^\/site-pages(\/?)/,"/"),e=e.replace(/\/html\//g,"/"),e=e.replace(/\/index(\.html?)?$/i,"/"),e.startsWith("/")||(e="/"+e),e=e.replace(/\/+/g,"/"),e!=="/"&&!e.endsWith("/")&&(e=e+"/"),e}function A(e){return e=String(e||"").replace(/[-_]+/g," ").trim(),e.split(" ").map(c=>c.charAt(0).toUpperCase()+c.slice(1)).join(" ")}async function F(e){for(const c of e)try{a("tentativo fetch JSON ->",c);const s=await fetch(c,{cache:"no-store"});if(!s.ok)throw new Error(`HTTP ${s.status}`);const d=await s.json();return a("JSON caricato da",c),{json:d,source:c}}catch(s){a("fetch fallito per",c,s&&s.message)}return null}function S(e,c){return Array.isArray(e)?e.map(s=>{if(!s||!s.url)return s;try{return new URL(s.url),s}catch{try{return Object.assign({},s,{url:new URL(s.url,c).href})}catch{return s}}}):e||[]}function E(e,c){const d=p(c).split("/").filter(Boolean),v=[];v.push({label:"Home",url:new URL("/",e).href,current:d.length===0});let w="/";for(let M=0;M<d.length;M++)w+=d[M]+"/",v.push({label:A(d[M]),url:new URL(w,e).href,current:M===d.length-1});return v.length===1&&(v[0].current=!0),v}function L(e){const c=document.createElement("nav");c.className="breadcrumb-nav",c.setAttribute("aria-label","Breadcrumb");const s=document.createElement("ol");return s.className="breadcrumb-list",e.forEach((d,v)=>{const w=document.createElement("li");if(w.className="breadcrumb-item",e.length-1,!d.current||d.current&&m){const g=document.createElement("a");g.className="breadcrumb-link",g.href=d.url,g.textContent=d.label,g.setAttribute("role","link"),d.current&&g.setAttribute("aria-current","page"),w.appendChild(g)}else{const g=document.createElement("span");g.className="breadcrumb-current",g.setAttribute("aria-current","page"),g.textContent=d.label,w.appendChild(g)}s.appendChild(w)}),c.appendChild(s),c}if(window.__breadcrumbsLoaded&&!n.force)return a("breadcrumbs già caricate — usa {force:true} per forzare"),window.__breadcrumbsItems||null;let l=n.rootUrl||null;const y=await F(o);let u=null;if(y&&(u=y.json,!l&&u.rootUrl&&(l=u.rootUrl)),l)l.endsWith("/")||(l=l+"/");else{const e=document.querySelector('link[rel="canonical"]');e&&e.href?l=e.href.replace(/\/?$/,"/"):l=location.origin.replace(/\/?$/,"/")}a("rootUrl finale =",l);let i=null;const H=p(location.pathname);if(a("currentPath normalizzato =",H),u&&u.pages&&typeof u.pages=="object"){if(i=u.pages[H],!i){const e=H.replace(/^\/(site-pages|html)\//,"/");u.pages[e]&&(i=u.pages[e])}if(!i){const e=H.replace(/\/$/,"");e&&u.pages[e]&&(i=u.pages[e])}if(!i){let e=null;for(const c of Object.keys(u.pages))H.startsWith(c)&&(!e||c.length>e.length)&&(e=c);e&&(a("prefix match trovato ->",e),i=u.pages[e])}i&&(i=S(i,l))}i||(a("nessuna voce trovata nel JSON; costruisco fallback da pathname"),i=E(l,location.pathname));try{const e=H==="/";i&&i.length>0&&(i=S(i,l),i[0].current=!!e)}catch(e){a("errore nel forzare lo stato Home/current",e&&e.message)}try{t.innerHTML="";const e=L(i);t.appendChild(e),t.setAttribute("aria-hidden","false")}catch(e){a("errore montaggio DOM",e&&e.message)}if(window.__breadcrumbsItems=i,window.__breadcrumbsLoaded=!0,n.onMount&&typeof n.onMount=="function")try{n.onMount(i)}catch(e){a("onMount callback error",e&&e.message)}return i}export{C as i};
